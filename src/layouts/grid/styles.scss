@use '../../styles/variables' as *;

// =============================================================================
// CSS @property declarations for non-inheriting custom properties
// =============================================================================
// By default, CSS custom properties (variables) inherit from parent elements.
// This causes issues when a parent Grid sets responsive sizing variables
// - all child components would inherit and use these values even if they
// didn't set their own.
//
// Using @property with `inherits: false` prevents this cascade, ensuring each
// Grid/GridItem instance only uses the variables it explicitly sets on itself.
@property --kiba-grid-height { syntax: "*"; inherits: false; }
@property --kiba-grid-child-alignment { syntax: "*"; inherits: false; }
@property --kiba-grid-content-alignment { syntax: "*"; inherits: false; }
@property --kiba-grid-item-width { syntax: "*"; inherits: false; }
@property --kiba-grid-item-width-sm { syntax: "*"; inherits: false; }
@property --kiba-grid-item-width-md { syntax: "*"; inherits: false; }
@property --kiba-grid-item-width-lg { syntax: "*"; inherits: false; }
@property --kiba-grid-item-width-xl { syntax: "*"; inherits: false; }
@property --kiba-grid-item-display { syntax: "*"; inherits: false; }
@property --kiba-grid-item-display-sm { syntax: "*"; inherits: false; }
@property --kiba-grid-item-display-md { syntax: "*"; inherits: false; }
@property --kiba-grid-item-display-lg { syntax: "*"; inherits: false; }
@property --kiba-grid-item-display-xl { syntax: "*"; inherits: false; }
@property --kiba-grid-item-gutter { syntax: "*"; inherits: false; }
@property --kiba-grid-item-alignment { syntax: "*"; inherits: false; }
@property --kiba-grid-item-overflow-y { syntax: "*"; inherits: false; }

@layer kiba-structure {
  .KibaGrid {
    box-sizing: border-box;
    width: 100%;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    overflow-x: auto;
    height: var(--kiba-grid-height, auto);
    align-items: var(--kiba-grid-child-alignment, stretch);
    justify-content: var(--kiba-grid-content-alignment, center);
  }

  .KibaGridItem {
    box-sizing: border-box;
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: auto;
    display: var(--kiba-grid-item-display, flex);
    flex-direction: column;
    width: var(--kiba-grid-item-width, 100%);
    overflow-y: var(--kiba-grid-item-overflow-y, visible);
    margin: var(--kiba-grid-item-gutter, 0);
    align-self: var(--kiba-grid-item-alignment, auto);

    @include screen-small {
      width: var(--kiba-grid-item-width-sm, var(--kiba-grid-item-width, 100%));
      display: var(--kiba-grid-item-display-sm, var(--kiba-grid-item-display, flex));
    }

    @include screen-medium {
      width: var(--kiba-grid-item-width-md, var(--kiba-grid-item-width-sm, var(--kiba-grid-item-width, 100%)));
      display: var(--kiba-grid-item-display-md, var(--kiba-grid-item-display-sm, var(--kiba-grid-item-display, flex)));
    }

    @include screen-large {
      width: var(--kiba-grid-item-width-lg, var(--kiba-grid-item-width-md, var(--kiba-grid-item-width-sm, var(--kiba-grid-item-width, 100%))));
      display: var(--kiba-grid-item-display-lg, var(--kiba-grid-item-display-md, var(--kiba-grid-item-display-sm, var(--kiba-grid-item-display, flex))));
    }

    @include screen-extra-large {
      width: var(--kiba-grid-item-width-xl, var(--kiba-grid-item-width-lg, var(--kiba-grid-item-width-md, var(--kiba-grid-item-width-sm, var(--kiba-grid-item-width, 100%)))));
      display: var(--kiba-grid-item-display-xl, var(--kiba-grid-item-display-lg, var(--kiba-grid-item-display-md, var(--kiba-grid-item-display-sm, var(--kiba-grid-item-display, flex)))));
    }
  }
}
