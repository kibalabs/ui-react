@use '../../styles/variables' as *;

// =============================================================================
// CSS @property declarations for non-inheriting custom properties
// =============================================================================
// By default, CSS custom properties (variables) inherit from parent elements.
// This causes issues when a parent Box sets responsive sizing variables
// (e.g. --kiba-box-height-md: 300px) - all child components would inherit
// and use these values even if they didn't set their own.
//
// Using @property with `inherits: false` prevents this cascade, ensuring each
// Box instance only uses the variables it explicitly sets on itself.
@property --kiba-box-width { syntax: "*"; inherits: false; }
@property --kiba-box-width-sm { syntax: "*"; inherits: false; }
@property --kiba-box-width-md { syntax: "*"; inherits: false; }
@property --kiba-box-width-lg { syntax: "*"; inherits: false; }
@property --kiba-box-width-xl { syntax: "*"; inherits: false; }
@property --kiba-box-height { syntax: "*"; inherits: false; }
@property --kiba-box-height-sm { syntax: "*"; inherits: false; }
@property --kiba-box-height-md { syntax: "*"; inherits: false; }
@property --kiba-box-height-lg { syntax: "*"; inherits: false; }
@property --kiba-box-height-xl { syntax: "*"; inherits: false; }
@property --kiba-box-max-width { syntax: "*"; inherits: false; }
@property --kiba-box-max-width-sm { syntax: "*"; inherits: false; }
@property --kiba-box-max-width-md { syntax: "*"; inherits: false; }
@property --kiba-box-max-width-lg { syntax: "*"; inherits: false; }
@property --kiba-box-max-width-xl { syntax: "*"; inherits: false; }
@property --kiba-box-max-height { syntax: "*"; inherits: false; }
@property --kiba-box-max-height-sm { syntax: "*"; inherits: false; }
@property --kiba-box-max-height-md { syntax: "*"; inherits: false; }
@property --kiba-box-max-height-lg { syntax: "*"; inherits: false; }
@property --kiba-box-max-height-xl { syntax: "*"; inherits: false; }
@property --kiba-box-min-width { syntax: "*"; inherits: false; }
@property --kiba-box-min-width-sm { syntax: "*"; inherits: false; }
@property --kiba-box-min-width-md { syntax: "*"; inherits: false; }
@property --kiba-box-min-width-lg { syntax: "*"; inherits: false; }
@property --kiba-box-min-width-xl { syntax: "*"; inherits: false; }
@property --kiba-box-min-height { syntax: "*"; inherits: false; }
@property --kiba-box-min-height-sm { syntax: "*"; inherits: false; }
@property --kiba-box-min-height-md { syntax: "*"; inherits: false; }
@property --kiba-box-min-height-lg { syntax: "*"; inherits: false; }
@property --kiba-box-min-height-xl { syntax: "*"; inherits: false; }

// Mixins for use by other components
@mixin default {
  background-color: transparent;
  border-radius: $border-radius;
  border-color: transparent;
  border-style: solid;
  border-width: 0;
  box-shadow: none;
  padding: 0;
  margin: 0;
  outline-style: solid;
  outline-color: transparent;
  outline-width: 0;
  outline-offset: 0;
  opacity: 1;
  box-sizing: border-box;
}

@mixin focusable {
  border-color: transparent;
  border-width: 2px;
  border-style: solid;
  outline: none;
  @include transition;
}

@mixin focussed {
  border-color: $color-background-dark50;
}

@mixin transparent {
  background-color: transparent;
  padding: $padding;
}

@mixin padded {
  padding: $padding;
}

@mixin card {
  background-color: $color-background-light10;
  border-color: $color-background-dark05;
  border-width: $border-width;
  box-shadow: 0px 8px 8px -6px rgba(0, 0, 0, 0.15);
  margin: 0px 4px 12px 4px;
  padding: $padding-wide2;
}

@mixin bordered {
  background-color: $color-background-light10;
  border-color: $color-background-dark05;
  border-width: $border-width;
  padding: $padding-wide2;
}

@mixin rounded {
  border-radius: 50%;
}

@mixin unpadded {
  padding: 0;
}

@mixin unmargined {
  margin: 0;
}

@mixin overlay {
  background-color: $color-background-clear75;
}

@layer kiba-structure {
  .KibaBox {
    box-sizing: border-box;
    flex-direction: column;
    display: var(--kiba-box-display, block);
    width: var(--kiba-box-width, 100%);
    height: var(--kiba-box-height, auto);
    max-width: var(--kiba-box-max-width, none);
    max-height: var(--kiba-box-max-height, none);
    min-width: var(--kiba-box-min-width, 0);
    min-height: var(--kiba-box-min-height, 0);

    &.clipContent { overflow: hidden; }
    &.captureTouches { pointer-events: all; }
    &.scrollableVertically { overflow-y: auto; }
    &.scrollableHorizontally { overflow-x: auto; }

    // Responsive breakpoints
    @include screen-small {
      width: var(--kiba-box-width-sm, var(--kiba-box-width, 100%));
      height: var(--kiba-box-height-sm, var(--kiba-box-height, auto));
      max-width: var(--kiba-box-max-width-sm, var(--kiba-box-max-width));
      max-height: var(--kiba-box-max-height-sm, var(--kiba-box-max-height));
      min-width: var(--kiba-box-min-width-sm, var(--kiba-box-min-width));
      min-height: var(--kiba-box-min-height-sm, var(--kiba-box-min-height));
    }

    @include screen-medium {
      width: var(--kiba-box-width-md, var(--kiba-box-width-sm, var(--kiba-box-width, 100%)));
      height: var(--kiba-box-height-md, var(--kiba-box-height-sm, var(--kiba-box-height, auto)));
      max-width: var(--kiba-box-max-width-md, var(--kiba-box-max-width-sm, var(--kiba-box-max-width)));
      max-height: var(--kiba-box-max-height-md, var(--kiba-box-max-height-sm, var(--kiba-box-max-height)));
      min-width: var(--kiba-box-min-width-md, var(--kiba-box-min-width-sm, var(--kiba-box-min-width)));
      min-height: var(--kiba-box-min-height-md, var(--kiba-box-min-height-sm, var(--kiba-box-min-height)));
    }

    @include screen-large {
      width: var(--kiba-box-width-lg, var(--kiba-box-width-md, var(--kiba-box-width-sm, var(--kiba-box-width, 100%))));
      height: var(--kiba-box-height-lg, var(--kiba-box-height-md, var(--kiba-box-height-sm, var(--kiba-box-height, auto))));
      max-width: var(--kiba-box-max-width-lg, var(--kiba-box-max-width-md, var(--kiba-box-max-width-sm, var(--kiba-box-max-width))));
      max-height: var(--kiba-box-max-height-lg, var(--kiba-box-max-height-md, var(--kiba-box-max-height-sm, var(--kiba-box-max-height))));
      min-width: var(--kiba-box-min-width-lg, var(--kiba-box-min-width-md, var(--kiba-box-min-width-sm, var(--kiba-box-min-width))));
      min-height: var(--kiba-box-min-height-lg, var(--kiba-box-min-height-md, var(--kiba-box-min-height-sm, var(--kiba-box-min-height))));
    }

    @include screen-extra-large {
      width: var(--kiba-box-width-xl, var(--kiba-box-width-lg, var(--kiba-box-width-md, var(--kiba-box-width-sm, var(--kiba-box-width, 100%)))));
      height: var(--kiba-box-height-xl, var(--kiba-box-height-lg, var(--kiba-box-height-md, var(--kiba-box-height-sm, var(--kiba-box-height, auto)))));
      max-width: var(--kiba-box-max-width-xl, var(--kiba-box-max-width-lg, var(--kiba-box-max-width-md, var(--kiba-box-max-width-sm, var(--kiba-box-max-width)))));
      max-height: var(--kiba-box-max-height-xl, var(--kiba-box-max-height-lg, var(--kiba-box-max-height-md, var(--kiba-box-max-height-sm, var(--kiba-box-max-height)))));
      min-width: var(--kiba-box-min-width-xl, var(--kiba-box-min-width-lg, var(--kiba-box-min-width-md, var(--kiba-box-min-width-sm, var(--kiba-box-min-width)))));
      min-height: var(--kiba-box-min-height-xl, var(--kiba-box-min-height-lg, var(--kiba-box-min-height-md, var(--kiba-box-min-height-sm, var(--kiba-box-min-height)))));
    }
  }
}

@layer kiba-theme {
  .KibaBox {
    @include default;
    &.transparent { @include transparent; }
    &.padded { @include padded; }
    &.card { @include card; }
    &.bordered { @include bordered; }
    &.focusable { @include focusable; }
    &.focussed { @include focussed; }
    &.rounded { @include rounded; }
    &.unpadded { @include unpadded; }
    &.unmargined { @include unmargined; }
    &.overlay { @include overlay; }
  }
}
