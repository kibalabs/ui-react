import { Meta } from '@storybook/addon-docs/blocks';

<Meta title='Introduction/Architecture' />

# Architecture

The project defines components that follow a customized version of the [Atomic Design by Brad Frost](https://bradfrost.com/blog/post/atomic-web-design/) principles. We've extended and augmented the core principles in a few ways described below.

## Component Hierarchy

### Particles

These are the basic building blocks on which most other components in UI-React will build. Particles are simple, stateless components that map closely to CSS styling.

**Examples:**
- **Box** - A rectangular area with background, shadow, border, and padding
- **Text** - Display text with various typographic styles
- **Icon** - Display simple icons
- **Spacing** - Create spacing between/around items
- **Image** - Display images with various fit modes

### Atoms

Atoms combine particles and native elements to create interactive, stateful components. These are the primary building blocks for user interfaces.

**Examples:**
- **Button** - Clickable element for user actions
- **Link** - Navigational text element
- **Checkbox** - Toggle input for boolean values
- **InputWrapper** - Consistent styling for input components

### Molecules

Molecules combine atoms and particles to create more complex UI patterns.

**Examples:**
- **OptionSelect** - Dropdown selection component
- **Accordion** - Collapsible content sections
- **Form** - Form layout and validation

### Layouts

Layout components handle positioning and arrangement of child components.

**Examples:**
- **Stack** - Vertical or horizontal stacking
- **Grid** - CSS Grid-based layouts
- **EqualGrid** - Equal-width grid columns
- **Container** - Max-width container with centering

## Theming with SCSS and CSS Variables

UI-React uses a pure CSS approach to theming via SCSS and CSS custom properties. This provides excellent performance, easy customization, and full CSS cascade support.

### CSS Layers

Styles are organized into CSS layers for predictable specificity:

```scss
@layer kiba-reset, kiba-structure, kiba-theme;
```

- **kiba-reset** - CSS reset and normalization
- **kiba-structure** - Component structure (layout, positioning)
- **kiba-theme** - Visual theming (colors, typography, spacing)

### CSS Custom Properties

All themeable values use CSS custom properties with the `--kiba-` prefix:

```scss
:root {
  // Colors
  --kiba-color-background: #ffffff;
  --kiba-color-text: #1a1a2e;
  --kiba-color-brand-primary: #4361ee;
  --kiba-color-brand-secondary: #3f37c9;

  // Typography
  --kiba-font-family: system-ui, sans-serif;
  --kiba-font-size-base: 16px;
  --kiba-font-weight-normal: 400;
  --kiba-font-weight-bold: 700;

  // Spacing
  --kiba-spacing-xs: 4px;
  --kiba-spacing-sm: 8px;
  --kiba-spacing-md: 16px;
  --kiba-spacing-lg: 24px;
  --kiba-spacing-xl: 32px;

  // Borders
  --kiba-border-radius: 4px;
  --kiba-border-width: 1px;
  --kiba-border-color: #e0e0e0;
}
```

### Component Styling

Each component has its own SCSS file with styles organized by layer:

```scss
// button/styles.scss
@layer kiba-structure {
  .KibaButton {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
  }
}

@layer kiba-theme {
  .KibaButton {
    background-color: transparent;
    border-radius: var(--kiba-border-radius);
    color: var(--kiba-color-brand-primary);
    padding: var(--kiba-spacing-sm) var(--kiba-spacing-md);

    &:hover {
      opacity: 0.9;
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
}
```

### Variants

Variants are implemented as CSS class modifiers:

```scss
@layer kiba-theme {
  .KibaButton {
    // Default styling
    background-color: transparent;
    color: var(--kiba-color-brand-primary);

    // Primary variant
    &.primary {
      background-color: var(--kiba-color-brand-primary);
      color: var(--kiba-color-text-on-brand);
    }

    // Secondary variant
    &.secondary {
      background-color: var(--kiba-color-brand-secondary);
      color: var(--kiba-color-text-on-brand);
    }

    // Large variant
    &.large {
      padding: var(--kiba-spacing-md) var(--kiba-spacing-lg);
      font-size: 1.25em;
    }
  }
}
```

Usage:
```tsx
<Button variant="primary" text="Primary Action" />
<Button variant="secondary-large" text="Large Secondary" />
```

### Customizing Themes

To customize the theme, override CSS custom properties in your application:

```scss
// Your app's theme.scss
@use '@kibalabs/ui-react/styles';

:root {
  --kiba-color-brand-primary: #e63946;
  --kiba-color-brand-secondary: #457b9d;
  --kiba-font-family: 'Inter', sans-serif;
  --kiba-border-radius: 8px;
}
```

### Adding Custom Variants

Extend component styling with your own variants:

```scss
// Extend Button with a "danger" variant
@layer kiba-theme {
  .KibaButton.danger {
    background-color: var(--kiba-color-error);
    color: white;

    &:hover {
      background-color: var(--kiba-color-error-dark);
    }
  }
}
```

## Responsive Design

Components support responsive behavior through the `ScreenSize` system:

```tsx
import { ScreenSize } from '@kibalabs/ui-react';

// Different padding at different screen sizes
<Stack
  paddingStart={PaddingSize.Default}
  paddingStartResponsive={{ base: PaddingSize.Narrow, medium: PaddingSize.Wide }}
>
  ...
</Stack>
```

Screen size breakpoints are defined in SCSS variables.

## Creating Custom Components

When creating your own components that integrate with UI-React:

1. **Use CSS layers** - Place styles in `kiba-structure` and `kiba-theme` layers
2. **Use CSS variables** - Reference `--kiba-*` variables for consistency
3. **Follow naming** - Use `Kiba` prefix for class names (e.g., `.KibaMyComponent`)
4. **Support variants** - Implement variants as class modifiers
5. **Use existing particles** - Compose with Box, Text, etc. where possible

```tsx
// MyCard/component.tsx
export const MyCard = ({ variant, children }: IMyCardProps) => {
  return (
    <Box className={getClassName('KibaMyCard', variant)}>
      {children}
    </Box>
  );
};
```

```scss
// MyCard/styles.scss
@layer kiba-theme {
  .KibaMyCard {
    background-color: var(--kiba-color-background);
    border-radius: var(--kiba-border-radius);
    padding: var(--kiba-spacing-md);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

    &.elevated {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
  }
}
```
